{"ast":null,"code":"import _slicedToArray from\"/Users/admin/Documents/react-projects/hesmis/hesmis-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{isEmpty}from'lodash';import moment from'moment';import React,{useEffect,useState}from'react';import{Button,Card,Col,ListGroup,Row}from'react-bootstrap';import{FaGraduationCap,FaUserCheck,FaUserFriends,FaUserGraduate,FaUsersCog,FaUserSecret,FaUserTimes}from'react-icons/fa';import{useDispatch,useSelector}from'react-redux';import{authActions,enrollmentActions}from'../../config/actions';import Avatar from'./Avatar';import ProfileData from'./ProfileData';import ChangePassword from'./ChangePassword';import AcademicDetail from'./AcademicDetail';import GuardianDetail from'./GuardianDetail';import NextOfKin from'./NextOfKin';import{DataSpinner}from'../../components/common';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MyProfile=function MyProfile(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.auth;}),gettingAuthUser=_useSelector.gettingAuthUser,authUser=_useSelector.authUser,currentStudentProgramme=_useSelector.currentStudentProgramme;var _useSelector2=useSelector(function(state){return state.enrollment;}),currentEvents=_useSelector2.currentEvents;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isRegistered=_useState2[0],setIsRegistered=_useState2[1];var _useState3=useState('bio-data'),_useState4=_slicedToArray(_useState3,2),currentTab=_useState4[0],setCurrentTab=_useState4[1];var reloadAuthUser=function reloadAuthUser(){dispatch(authActions.getAuthUser());dispatch(enrollmentActions.getCurrentEvents(currentStudentProgramme===null||currentStudentProgramme===void 0?void 0:currentStudentProgramme.id));};useEffect(function(){if(isEmpty(authUser))reloadAuthUser();},[]);useEffect(function(){if(!isEmpty(currentEvents)){setIsRegistered(!isEmpty(currentEvents.studentRegistration));}},[currentEvents]);var tabList=[{id:1,title:'Personal Details',key:'bio-data',icon:/*#__PURE__*/_jsx(FaUserGraduate,{className:\"me-2\"})},{id:2,title:'Academic Details',key:'academic-details',icon:/*#__PURE__*/_jsx(FaGraduationCap,{className:\"me-2\"})},{id:3,title:'Guardian Details',key:'guardian-details',icon:/*#__PURE__*/_jsx(FaUsersCog,{className:\"me-2\"})},{id:4,title:'Next of Kin',key:'next-of-kin',icon:/*#__PURE__*/_jsx(FaUserFriends,{className:\"me-2\"})},{id:5,title:'Change Password',key:'change-password',icon:/*#__PURE__*/_jsx(FaUserSecret,{className:\"me-2\"})}];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{className:\"py-3 text-primary font600 text-sm mb-0\",children:\"MY ACADEMIC PROFILE\"}),/*#__PURE__*/_jsxs(Row,{className:\"row-deck gx-0 gy-2\",children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Card,{className:\"text-sm text-muted border-0 p-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 border-bottom\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto text-center pb-2\",children:/*#__PURE__*/_jsx(Avatar,{})}),gettingAuthUser&&isEmpty(authUser)?/*#__PURE__*/_jsx(DataSpinner,{message:\"Loading Profile...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font600 text-uppercase text-primary\",children:\"\".concat(authUser.firstname,\" \").concat(authUser.lastname)}),/*#__PURE__*/_jsx(\"div\",{className:\"font600 text-uppercase text-xs mt-2\",children:\"STUDENT NO.: \".concat(authUser.student_number)}),/*#__PURE__*/_jsxs(Button,{variant:isRegistered?'success':'danger',size:\"sm\",className:\"text-sm mt-2 font600\",children:[isRegistered?/*#__PURE__*/_jsx(FaUserCheck,{className:\"me-1\"}):/*#__PURE__*/_jsx(FaUserTimes,{className:\"me-1\"}),isRegistered?'REGISTERED':'NOT REGISTERED']})]})]}),/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:tabList.map(function(tab){return/*#__PURE__*/_jsxs(ListGroup.Item,{onClick:function onClick(){return setCurrentTab(tab.key);},active:currentTab===tab.key,action:true,className:\"font600 text-sm text-left\",children:[tab.icon,tab.title]},tab.id);})})]})}),/*#__PURE__*/_jsx(Col,{md:9,children:/*#__PURE__*/_jsxs(Card,{className:\"border-start border-top-0 border-bottom-0 border-end-0\",children:[currentTab==='bio-data'&&/*#__PURE__*/_jsx(ProfileData,{authUser:authUser}),currentTab==='next-of-kin'&&/*#__PURE__*/_jsx(NextOfKin,{authUser:authUser}),currentTab==='guardian-details'&&/*#__PURE__*/_jsx(GuardianDetail,{authUser:authUser}),currentTab==='academic-details'&&/*#__PURE__*/_jsx(AcademicDetail,{authUser:authUser}),currentTab==='change-password'&&/*#__PURE__*/_jsx(ChangePassword,{})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-2 w-100 text-center text-muted text-xs\",children:[\"Last Login\",\" \".concat(moment(authUser.last_login).format('ddd, MMM Do YYYY, h:mm:ss a'))]})]});};export default MyProfile;","map":{"version":3,"sources":["/Users/admin/Documents/react-projects/hesmis/hesmis-front/src/containers/MyProfile/index.jsx"],"names":["isEmpty","moment","React","useEffect","useState","Button","Card","Col","ListGroup","Row","FaGraduationCap","FaUserCheck","FaUserFriends","FaUserGraduate","FaUsersCog","FaUserSecret","FaUserTimes","useDispatch","useSelector","authActions","enrollmentActions","Avatar","ProfileData","ChangePassword","AcademicDetail","GuardianDetail","NextOfKin","DataSpinner","MyProfile","dispatch","state","auth","gettingAuthUser","authUser","currentStudentProgramme","enrollment","currentEvents","isRegistered","setIsRegistered","currentTab","setCurrentTab","reloadAuthUser","getAuthUser","getCurrentEvents","id","studentRegistration","tabList","title","key","icon","firstname","lastname","student_number","map","tab","last_login","format"],"mappings":"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","sourcesContent":["import { isEmpty } from 'lodash';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\nimport { Button, Card, Col, ListGroup, Row } from 'react-bootstrap';\nimport {\n  FaGraduationCap,\n  FaUserCheck,\n  FaUserFriends,\n  FaUserGraduate,\n  FaUsersCog,\n  FaUserSecret,\n  FaUserTimes,\n} from 'react-icons/fa';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { authActions, enrollmentActions } from '../../config/actions';\nimport Avatar from './Avatar';\nimport ProfileData from './ProfileData';\nimport ChangePassword from './ChangePassword';\nimport AcademicDetail from './AcademicDetail';\nimport GuardianDetail from './GuardianDetail';\nimport NextOfKin from './NextOfKin';\nimport { DataSpinner } from '../../components/common';\n\nconst MyProfile = () => {\n  const dispatch = useDispatch();\n  const { gettingAuthUser, authUser, currentStudentProgramme } = useSelector(\n    (state) => state.auth\n  );\n  const { currentEvents } = useSelector((state) => state.enrollment);\n  const [isRegistered, setIsRegistered] = useState(false);\n  const [currentTab, setCurrentTab] = useState('bio-data');\n\n  const reloadAuthUser = () => {\n    dispatch(authActions.getAuthUser());\n    dispatch(enrollmentActions.getCurrentEvents(currentStudentProgramme?.id));\n  };\n\n  useEffect(() => {\n    if (isEmpty(authUser)) reloadAuthUser();\n  }, []);\n\n  useEffect(() => {\n    if (!isEmpty(currentEvents)) {\n      setIsRegistered(!isEmpty(currentEvents.studentRegistration));\n    }\n  }, [currentEvents]);\n\n  const tabList = [\n    {\n      id: 1,\n      title: 'Personal Details',\n      key: 'bio-data',\n      icon: <FaUserGraduate className=\"me-2\" />,\n    },\n    {\n      id: 2,\n      title: 'Academic Details',\n      key: 'academic-details',\n      icon: <FaGraduationCap className=\"me-2\" />,\n    },\n    {\n      id: 3,\n      title: 'Guardian Details',\n      key: 'guardian-details',\n      icon: <FaUsersCog className=\"me-2\" />,\n    },\n    {\n      id: 4,\n      title: 'Next of Kin',\n      key: 'next-of-kin',\n      icon: <FaUserFriends className=\"me-2\" />,\n    },\n    {\n      id: 5,\n      title: 'Change Password',\n      key: 'change-password',\n      icon: <FaUserSecret className=\"me-2\" />,\n    },\n  ];\n\n  return (\n    <>\n      <Card>\n        <Card.Header className=\"py-3 text-primary font600 text-sm mb-0\">\n          MY ACADEMIC PROFILE\n        </Card.Header>\n        <Row className=\"row-deck gx-0 gy-2\">\n          <Col md={3}>\n            <Card className=\"text-sm text-muted border-0 p-0\">\n              <div className=\"text-center p-3 border-bottom\">\n                <div className=\"mx-auto text-center pb-2\">\n                  <Avatar />\n                </div>\n                {gettingAuthUser && isEmpty(authUser) ? (\n                  <DataSpinner message=\"Loading Profile...\" />\n                ) : (\n                  <>\n                    <div className=\"font600 text-uppercase text-primary\">{`${authUser.firstname} ${authUser.lastname}`}</div>\n                    <div className=\"font600 text-uppercase text-xs mt-2\">{`STUDENT NO.: ${authUser.student_number}`}</div>\n\n                    <Button\n                      variant={isRegistered ? 'success' : 'danger'}\n                      size=\"sm\"\n                      className=\"text-sm mt-2 font600\"\n                    >\n                      {isRegistered ? (\n                        <FaUserCheck className=\"me-1\" />\n                      ) : (\n                        <FaUserTimes className=\"me-1\" />\n                      )}\n                      {isRegistered ? 'REGISTERED' : 'NOT REGISTERED'}\n                    </Button>\n                  </>\n                )}\n              </div>\n              <ListGroup variant=\"flush\">\n                {tabList.map((tab) => (\n                  <ListGroup.Item\n                    key={tab.id}\n                    onClick={() => setCurrentTab(tab.key)}\n                    active={currentTab === tab.key}\n                    action\n                    className=\"font600 text-sm text-left\"\n                  >\n                    {tab.icon}\n                    {tab.title}\n                  </ListGroup.Item>\n                ))}\n              </ListGroup>\n            </Card>\n          </Col>\n          <Col md={9}>\n            <Card className=\"border-start border-top-0 border-bottom-0 border-end-0\">\n              {currentTab === 'bio-data' && <ProfileData authUser={authUser} />}\n              {currentTab === 'next-of-kin' && (\n                <NextOfKin authUser={authUser} />\n              )}\n              {currentTab === 'guardian-details' && (\n                <GuardianDetail authUser={authUser} />\n              )}\n              {currentTab === 'academic-details' && (\n                <AcademicDetail authUser={authUser} />\n              )}\n              {currentTab === 'change-password' && <ChangePassword />}\n            </Card>\n          </Col>\n        </Row>\n      </Card>\n\n      <div className=\"my-2 w-100 text-center text-muted text-xs\">\n        Last Login\n        {` ${moment(authUser.last_login).format(\n          'ddd, MMM Do YYYY, h:mm:ss a'\n        )}`}\n      </div>\n    </>\n  );\n};\n\nexport default MyProfile;\n"]},"metadata":{},"sourceType":"module"}