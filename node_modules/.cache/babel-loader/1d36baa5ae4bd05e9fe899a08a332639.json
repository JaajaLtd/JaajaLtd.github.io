{"ast":null,"code":"import _slicedToArray from\"/Users/admin/Documents/react-projects/hesmis/hesmis-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Result}from'antd';import{get,isEmpty}from'lodash';import React,{useEffect,useState}from'react';import{Card,Col,Form,Row,Table}from'react-bootstrap';import{useForm}from'react-hook-form';import{FaSearchDollar}from'react-icons/fa';import{useDispatch,useSelector}from'react-redux';import{AlertMessage,InputText,SubmitButton}from'../../components/common';import{paymentActions}from'../../config/actions';import usePrevious from'../Hooks/usePrevious';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SearchPayment=function SearchPayment(){var dispatch=useDispatch();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var _useSelector=useSelector(function(state){return state.myTransaction;}),searchingPayment=_useSelector.searchingPayment,searchPayment=_useSelector.searchPayment,searchPaymentError=_useSelector.searchPaymentError;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),searchSuccess=_useState2[0],setSearchSuccess=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),searchError=_useState4[0],setSearchError=_useState4[1];var prevState=usePrevious({searchPayment:searchPayment,searchPaymentError:searchPaymentError});useEffect(function(){if(!isEmpty(prevState)){if(!isEmpty(searchPayment)&&searchPayment!==prevState.searchPayment){setSearchSuccess(searchPayment);}if(!isEmpty(searchPaymentError)&&searchPaymentError!==prevState.searchPaymentError){var _searchPaymentError$e,_searchPaymentError$s;setSearchError((searchPaymentError===null||searchPaymentError===void 0?void 0:(_searchPaymentError$e=searchPaymentError.error)===null||_searchPaymentError$e===void 0?void 0:_searchPaymentError$e.message)||(searchPaymentError===null||searchPaymentError===void 0?void 0:(_searchPaymentError$s=searchPaymentError.server)===null||_searchPaymentError$s===void 0?void 0:_searchPaymentError$s.message));}}},[searchPayment,searchPaymentError]);var onSearchPayment=function onSearchPayment(data){setSearchError(null);setSearchSuccess({});if(data===null||data===void 0?void 0:data.searchKey){dispatch(paymentActions.searchPayment(data.searchKey));}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{className:\"py-3 font600 text-sm text-uppercase text-muted\",children:\"CHECK PAYMENT REFERENCE NUMBER STATUS\"}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSearchPayment),children:[/*#__PURE__*/_jsxs(Row,{className:\"g-0\",children:[/*#__PURE__*/_jsx(Col,{md:{offset:3,span:4},children:/*#__PURE__*/_jsx(InputText,{name:\"searchKey\",type:\"search\",placeholder:\"Enter Payment Reference Number\",register:register({required:'Enter Payment Reference',minLength:{value:13,message:'Invalid Reference Number'},maxLength:{value:13,message:'Invalid Reference Number'}}),error:get(errors,'searchKey.message')})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(SubmitButton,{className:\"text-uppercase text-sm font600 text-white w-100\",text:\"Search\",loadingText:\"Searching...\",loading:searchingPayment,iconBefore:/*#__PURE__*/_jsx(FaSearchDollar,{className:\"me-2\"})})})]}),searchError&&/*#__PURE__*/_jsx(Result,{status:\"error\",title:searchError}),!isEmpty(searchSuccess)&&/*#__PURE__*/_jsxs(Card,{body:true,className:\"shadow-none rounded my-4\",children:[/*#__PURE__*/_jsx(AlertMessage,{type:searchSuccess.code==='T'?'success':'info',message:\"Status: \".concat(searchSuccess===null||searchSuccess===void 0?void 0:searchSuccess.description),className:\"font600 text-sm\"}),/*#__PURE__*/_jsx(Table,{size:\"md\",bordered:true,striped:true,responsive:true,className:\"text-sm text-muted font600\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"PRN\"}),/*#__PURE__*/_jsx(\"td\",{children:searchSuccess.PRN})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(parseInt(searchSuccess.AmountPaid,10).toLocaleString(),\" \").concat(searchSuccess===null||searchSuccess===void 0?void 0:searchSuccess.Currency)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"PAYMENT STATUS\"}),/*#__PURE__*/_jsx(\"td\",{children:searchSuccess.StatusDesc})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Generated By\"}),/*#__PURE__*/_jsx(\"td\",{children:searchSuccess.TaxPayerName})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Expiry Date\"}),/*#__PURE__*/_jsx(\"td\",{children:searchSuccess.PaymentExpiryDate})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Payment Date\"}),/*#__PURE__*/_jsx(\"td\",{children:searchSuccess.DatePaid||'-- -- ----'})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Payment Bank\"}),/*#__PURE__*/_jsx(\"td\",{children:searchSuccess.PaymentBank||'---------'})]})]})})]})]})})]})});};export default SearchPayment;","map":{"version":3,"sources":["/Users/admin/Documents/react-projects/hesmis/hesmis-front/src/containers/Payments/SearchPayment.jsx"],"names":["Result","get","isEmpty","React","useEffect","useState","Card","Col","Form","Row","Table","useForm","FaSearchDollar","useDispatch","useSelector","AlertMessage","InputText","SubmitButton","paymentActions","usePrevious","SearchPayment","dispatch","register","handleSubmit","errors","state","myTransaction","searchingPayment","searchPayment","searchPaymentError","searchSuccess","setSearchSuccess","searchError","setSearchError","prevState","error","message","server","onSearchPayment","data","searchKey","offset","span","required","minLength","value","maxLength","code","description","PRN","parseInt","AmountPaid","toLocaleString","Currency","StatusDesc","TaxPayerName","PaymentExpiryDate","DatePaid","PaymentBank"],"mappings":"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","sourcesContent":["import { Result } from 'antd';\nimport { get, isEmpty } from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport { Card, Col, Form, Row, Table } from 'react-bootstrap';\nimport { useForm } from 'react-hook-form';\nimport { FaSearchDollar } from 'react-icons/fa';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { AlertMessage, InputText, SubmitButton } from '../../components/common';\nimport { paymentActions } from '../../config/actions';\nimport usePrevious from '../Hooks/usePrevious';\n\nconst SearchPayment = () => {\n  const dispatch = useDispatch();\n  const { register, handleSubmit, errors } = useForm();\n  const { searchingPayment, searchPayment, searchPaymentError } = useSelector(\n    (state) => state.myTransaction\n  );\n  const [searchSuccess, setSearchSuccess] = useState({});\n  const [searchError, setSearchError] = useState(null);\n  const prevState = usePrevious({ searchPayment, searchPaymentError });\n\n  useEffect(() => {\n    if (!isEmpty(prevState)) {\n      if (\n        !isEmpty(searchPayment) &&\n        searchPayment !== prevState.searchPayment\n      ) {\n        setSearchSuccess(searchPayment);\n      }\n      if (\n        !isEmpty(searchPaymentError) &&\n        searchPaymentError !== prevState.searchPaymentError\n      ) {\n        setSearchError(\n          searchPaymentError?.error?.message ||\n            searchPaymentError?.server?.message\n        );\n      }\n    }\n  }, [searchPayment, searchPaymentError]);\n\n  const onSearchPayment = (data) => {\n    setSearchError(null);\n    setSearchSuccess({});\n    if (data?.searchKey) {\n      dispatch(paymentActions.searchPayment(data.searchKey));\n    }\n  };\n\n  return (\n    <>\n      <Card>\n        <Card.Header className=\"py-3 font600 text-sm text-uppercase text-muted\">\n          CHECK PAYMENT REFERENCE NUMBER STATUS\n        </Card.Header>\n        <Card.Body>\n          <Form onSubmit={handleSubmit(onSearchPayment)}>\n            <Row className=\"g-0\">\n              <Col md={{ offset: 3, span: 4 }}>\n                <InputText\n                  name=\"searchKey\"\n                  type=\"search\"\n                  placeholder=\"Enter Payment Reference Number\"\n                  register={register({\n                    required: 'Enter Payment Reference',\n                    minLength: {\n                      value: 13,\n                      message: 'Invalid Reference Number',\n                    },\n                    maxLength: {\n                      value: 13,\n                      message: 'Invalid Reference Number',\n                    },\n                  })}\n                  error={get(errors, 'searchKey.message')}\n                />\n              </Col>\n              <Col md={2}>\n                <SubmitButton\n                  className=\"text-uppercase text-sm font600 text-white w-100\"\n                  text=\"Search\"\n                  loadingText=\"Searching...\"\n                  loading={searchingPayment}\n                  iconBefore={<FaSearchDollar className=\"me-2\" />}\n                />\n              </Col>\n            </Row>\n\n            {searchError && <Result status=\"error\" title={searchError} />}\n\n            {!isEmpty(searchSuccess) && (\n              <Card body className=\"shadow-none rounded my-4\">\n                <AlertMessage\n                  type={searchSuccess.code === 'T' ? 'success' : 'info'}\n                  message={`Status: ${searchSuccess?.description}`}\n                  className=\"font600 text-sm\"\n                />\n\n                <Table\n                  size=\"md\"\n                  bordered\n                  striped\n                  responsive\n                  className=\"text-sm text-muted font600\"\n                >\n                  <tbody>\n                    <tr>\n                      <td>PRN</td>\n                      <td>{searchSuccess.PRN}</td>\n                    </tr>\n                    <tr>\n                      <td>Amount</td>\n                      <td>\n                        {`${parseInt(\n                          searchSuccess.AmountPaid,\n                          10\n                        ).toLocaleString()} ${searchSuccess?.Currency}`}\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>PAYMENT STATUS</td>\n                      <td>{searchSuccess.StatusDesc}</td>\n                    </tr>\n                    <tr>\n                      <td>Generated By</td>\n                      <td>{searchSuccess.TaxPayerName}</td>\n                    </tr>\n                    <tr>\n                      <td>Expiry Date</td>\n                      <td>{searchSuccess.PaymentExpiryDate}</td>\n                    </tr>\n                    <tr>\n                      <td>Payment Date</td>\n                      <td>{searchSuccess.DatePaid || '-- -- ----'}</td>\n                    </tr>\n                    <tr>\n                      <td>Payment Bank</td>\n                      <td>{searchSuccess.PaymentBank || '---------'}</td>\n                    </tr>\n                  </tbody>\n                </Table>\n              </Card>\n            )}\n          </Form>\n        </Card.Body>\n      </Card>\n    </>\n  );\n};\n\nexport default SearchPayment;\n"]},"metadata":{},"sourceType":"module"}