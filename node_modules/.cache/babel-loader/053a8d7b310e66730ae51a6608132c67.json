{"ast":null,"code":"import _regeneratorRuntime from\"/Users/admin/Documents/react-projects/hesmis/hesmis-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(loginStudent),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(logoutUser),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(fetchAuthUser),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(getAuthUserBalance),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(getStudentProgrammes),_marked6=/*#__PURE__*/_regeneratorRuntime.mark(changePassword),_marked7=/*#__PURE__*/_regeneratorRuntime.mark(requestToken),_marked8=/*#__PURE__*/_regeneratorRuntime.mark(resetPassword),_marked9=/*#__PURE__*/_regeneratorRuntime.mark(watchLoginStudent),_marked10=/*#__PURE__*/_regeneratorRuntime.mark(watchLogout),_marked11=/*#__PURE__*/_regeneratorRuntime.mark(watchFetchAuthUser),_marked12=/*#__PURE__*/_regeneratorRuntime.mark(watchGetStudentProgrammes),_marked13=/*#__PURE__*/_regeneratorRuntime.mark(watchGetStudentBalance),_marked14=/*#__PURE__*/_regeneratorRuntime.mark(watchChangePassword),_marked15=/*#__PURE__*/_regeneratorRuntime.mark(watchRequestToken),_marked16=/*#__PURE__*/_regeneratorRuntime.mark(watchResetPassword);import{takeLatest,fork,put}from'redux-saga/effects';import axios from'axios';import{authActions}from'../../actions';import{clearToken}from'../../services/storageService';function loginStudent(actions){var response;return _regeneratorRuntime.wrap(function loginStudent$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios({url:'/student-portal/auth/login',method:'POST',data:actions.data});case 3:response=_context.sent;_context.next=6;return put({type:authActions.LOGIN_STUDENT_SUCCESS,data:response});case 6:_context.next=8;return put({type:authActions.GET_AUTH_USER_REQUEST});case 8:_context.next=10;return put({type:authActions.GET_AUTH_USER_ACCOUNT_BALANCE_REQUEST});case 10:_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);_context.next=16;return put({type:authActions.LOGIN_STUDENT_ERROR,error:_context.t0.data});case 16:case\"end\":return _context.stop();}}},_marked,null,[[0,12]]);}function logoutUser(){var response;return _regeneratorRuntime.wrap(function logoutUser$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios({url:'/student-portal/auth/logout',method:'POST'});case 3:response=_context2.sent;clearToken();_context2.next=7;return put({type:authActions.LOGOUT_SUCCESS,data:response});case 7:_context2.next=9;return put({type:authActions.REMOVE_AUTH_USER});case 9:_context2.next=11;return put({type:authActions.SET_IS_AUTHENTICATED,payload:false});case 11:_context2.next=18;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](0);if(_context2.t0.status===403||_context2.t0.status===401)clearToken();_context2.next=18;return put({type:authActions.LOGOUT_ERROR,error:_context2.t0.data});case 18:case\"end\":return _context2.stop();}}},_marked2,null,[[0,13]]);}function fetchAuthUser(){var response;return _regeneratorRuntime.wrap(function fetchAuthUser$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios({url:'/student-portal/auth/profile',method:'GET'});case 3:response=_context3.sent;_context3.next=6;return put({type:authActions.GET_AUTH_USER_SUCCESS,data:response.data});case 6:_context3.next=8;return put({type:authActions.SET_AUTH_USER,user:response.data});case 8:_context3.next=10;return put({type:authActions.GET_AUTH_USER_ACCOUNT_BALANCE_REQUEST});case 10:_context3.next=16;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](0);_context3.next=16;return put({type:authActions.GET_AUTH_USER_ERROR,error:_context3.t0.data});case 16:case\"end\":return _context3.stop();}}},_marked3,null,[[0,12]]);}function getAuthUserBalance(){var response;return _regeneratorRuntime.wrap(function getAuthUserBalance$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios({url:'/student-portal/auth/account-balance',method:'GET'});case 3:response=_context4.sent;_context4.next=6;return put({type:authActions.GET_AUTH_USER_ACCOUNT_BALANCE_SUCCESS,data:response.accountBalance});case 6:_context4.next=12;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);_context4.next=12;return put({type:authActions.GET_AUTH_USER_ACCOUNT_BALANCE_ERROR,error:_context4.t0.data});case 12:case\"end\":return _context4.stop();}}},_marked4,null,[[0,8]]);}function getStudentProgrammes(){var response;return _regeneratorRuntime.wrap(function getStudentProgrammes$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios({url:'/student-portal/auth/academic-records',method:'GET'});case 3:response=_context5.sent;_context5.next=6;return put({type:authActions.GET_STUDENT_PROGRAMMES_SUCCESS,data:response.data});case 6:_context5.next=12;break;case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](0);_context5.next=12;return put({type:authActions.GET_STUDENT_PROGRAMMES_ERROR,error:_context5.t0.data});case 12:case\"end\":return _context5.stop();}}},_marked5,null,[[0,8]]);}function changePassword(action){var response;return _regeneratorRuntime.wrap(function changePassword$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return axios({url:\"/student-portal/auth/change-password\",method:'PUT',data:action.data});case 3:response=_context6.sent;_context6.next=6;return put({type:authActions.CHANGE_PASSWORD_SUCCESS,data:response});case 6:_context6.next=12;break;case 8:_context6.prev=8;_context6.t0=_context6[\"catch\"](0);_context6.next=12;return put({type:authActions.CHANGE_PASSWORD_ERROR,error:_context6.t0.data});case 12:case\"end\":return _context6.stop();}}},_marked6,null,[[0,8]]);}function requestToken(action){var response;return _regeneratorRuntime.wrap(function requestToken$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return axios({url:\"/student-portal/auth/request-token\",method:'POST',data:action.data});case 3:response=_context7.sent;_context7.next=6;return put({type:authActions.REQUEST_TOKEN_SUCCESS,data:response});case 6:_context7.next=12;break;case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](0);_context7.next=12;return put({type:authActions.REQUEST_TOKEN_ERROR,error:_context7.t0.data});case 12:case\"end\":return _context7.stop();}}},_marked7,null,[[0,8]]);}function resetPassword(action){var response;return _regeneratorRuntime.wrap(function resetPassword$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return axios({url:\"/student-portal/auth/reset-password\",method:'PUT',data:action.data});case 3:response=_context8.sent;_context8.next=6;return put({type:authActions.RESET_PASSWORD_SUCCESS,data:response});case 6:_context8.next=12;break;case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](0);_context8.next=12;return put({type:authActions.RESET_PASSWORD_ERROR,error:_context8.t0.data});case 12:case\"end\":return _context8.stop();}}},_marked8,null,[[0,8]]);}function watchLoginStudent(){return _regeneratorRuntime.wrap(function watchLoginStudent$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return takeLatest(authActions.LOGIN_STUDENT_REQUEST,loginStudent);case 2:case\"end\":return _context9.stop();}}},_marked9);}function watchLogout(){return _regeneratorRuntime.wrap(function watchLogout$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return takeLatest(authActions.LOGOUT_REQUEST,logoutUser);case 2:case\"end\":return _context10.stop();}}},_marked10);}function watchFetchAuthUser(){return _regeneratorRuntime.wrap(function watchFetchAuthUser$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return takeLatest(authActions.GET_AUTH_USER_REQUEST,fetchAuthUser);case 2:case\"end\":return _context11.stop();}}},_marked11);}function watchGetStudentProgrammes(){return _regeneratorRuntime.wrap(function watchGetStudentProgrammes$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return takeLatest(authActions.GET_STUDENT_PROGRAMMES_REQUEST,getStudentProgrammes);case 2:case\"end\":return _context12.stop();}}},_marked12);}function watchGetStudentBalance(){return _regeneratorRuntime.wrap(function watchGetStudentBalance$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return takeLatest(authActions.GET_AUTH_USER_ACCOUNT_BALANCE_REQUEST,getAuthUserBalance);case 2:case\"end\":return _context13.stop();}}},_marked13);}function watchChangePassword(){return _regeneratorRuntime.wrap(function watchChangePassword$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return takeLatest(authActions.CHANGE_PASSWORD_REQUEST,changePassword);case 2:case\"end\":return _context14.stop();}}},_marked14);}function watchRequestToken(){return _regeneratorRuntime.wrap(function watchRequestToken$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.next=2;return takeLatest(authActions.REQUEST_TOKEN_REQUEST,requestToken);case 2:case\"end\":return _context15.stop();}}},_marked15);}function watchResetPassword(){return _regeneratorRuntime.wrap(function watchResetPassword$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.next=2;return takeLatest(authActions.RESET_PASSWORD_REQUEST,resetPassword);case 2:case\"end\":return _context16.stop();}}},_marked16);}var forkFunctions=[fork(watchLoginStudent),fork(watchLogout),fork(watchFetchAuthUser),fork(watchGetStudentProgrammes),fork(watchGetStudentBalance),fork(watchChangePassword),fork(watchRequestToken),fork(watchResetPassword)];export default forkFunctions;","map":{"version":3,"sources":["/Users/admin/Documents/react-projects/hesmis/hesmis-front/src/config/saga/auth/index.js"],"names":["loginStudent","logoutUser","fetchAuthUser","getAuthUserBalance","getStudentProgrammes","changePassword","requestToken","resetPassword","watchLoginStudent","watchLogout","watchFetchAuthUser","watchGetStudentProgrammes","watchGetStudentBalance","watchChangePassword","watchRequestToken","watchResetPassword","takeLatest","fork","put","axios","authActions","clearToken","actions","url","method","data","response","type","LOGIN_STUDENT_SUCCESS","GET_AUTH_USER_REQUEST","GET_AUTH_USER_ACCOUNT_BALANCE_REQUEST","LOGIN_STUDENT_ERROR","error","LOGOUT_SUCCESS","REMOVE_AUTH_USER","SET_IS_AUTHENTICATED","payload","status","LOGOUT_ERROR","GET_AUTH_USER_SUCCESS","SET_AUTH_USER","user","GET_AUTH_USER_ERROR","GET_AUTH_USER_ACCOUNT_BALANCE_SUCCESS","accountBalance","GET_AUTH_USER_ACCOUNT_BALANCE_ERROR","GET_STUDENT_PROGRAMMES_SUCCESS","GET_STUDENT_PROGRAMMES_ERROR","action","CHANGE_PASSWORD_SUCCESS","CHANGE_PASSWORD_ERROR","REQUEST_TOKEN_SUCCESS","REQUEST_TOKEN_ERROR","RESET_PASSWORD_SUCCESS","RESET_PASSWORD_ERROR","LOGIN_STUDENT_REQUEST","LOGOUT_REQUEST","GET_STUDENT_PROGRAMMES_REQUEST","CHANGE_PASSWORD_REQUEST","REQUEST_TOKEN_REQUEST","RESET_PASSWORD_REQUEST","forkFunctions"],"mappings":"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","sourcesContent":["import { takeLatest, fork, put } from 'redux-saga/effects';\nimport axios from 'axios';\nimport { authActions } from '../../actions';\nimport { clearToken } from '../../services/storageService';\n\nfunction* loginStudent(actions) {\n  try {\n    const response = yield axios({\n      url: '/student-portal/auth/login',\n      method: 'POST',\n      data: actions.data,\n    });\n    yield put({\n      type: authActions.LOGIN_STUDENT_SUCCESS,\n      data: response,\n    });\n    yield put({\n      type: authActions.GET_AUTH_USER_REQUEST,\n    });\n    yield put({\n      type: authActions.GET_AUTH_USER_ACCOUNT_BALANCE_REQUEST,\n    });\n  } catch (error) {\n    yield put({\n      type: authActions.LOGIN_STUDENT_ERROR,\n      error: error.data,\n    });\n  }\n}\n\nfunction* logoutUser() {\n  try {\n    const response = yield axios({\n      url: '/student-portal/auth/logout',\n      method: 'POST',\n    });\n    clearToken();\n    yield put({\n      type: authActions.LOGOUT_SUCCESS,\n      data: response,\n    });\n    yield put({\n      type: authActions.REMOVE_AUTH_USER,\n    });\n    yield put({\n      type: authActions.SET_IS_AUTHENTICATED,\n      payload: false,\n    });\n  } catch (error) {\n    if (error.status === 403 || error.status === 401) clearToken();\n    yield put({\n      type: authActions.LOGOUT_ERROR,\n      error: error.data,\n    });\n  }\n}\n\nfunction* fetchAuthUser() {\n  try {\n    const response = yield axios({\n      url: '/student-portal/auth/profile',\n      method: 'GET',\n    });\n    yield put({\n      type: authActions.GET_AUTH_USER_SUCCESS,\n      data: response.data,\n    });\n    yield put({\n      type: authActions.SET_AUTH_USER,\n      user: response.data,\n    });\n    yield put({\n      type: authActions.GET_AUTH_USER_ACCOUNT_BALANCE_REQUEST,\n    });\n  } catch (error) {\n    yield put({\n      type: authActions.GET_AUTH_USER_ERROR,\n      error: error.data,\n    });\n  }\n}\n\nfunction* getAuthUserBalance() {\n  try {\n    const response = yield axios({\n      url: '/student-portal/auth/account-balance',\n      method: 'GET',\n    });\n    yield put({\n      type: authActions.GET_AUTH_USER_ACCOUNT_BALANCE_SUCCESS,\n      data: response.accountBalance,\n    });\n  } catch (error) {\n    yield put({\n      type: authActions.GET_AUTH_USER_ACCOUNT_BALANCE_ERROR,\n      error: error.data,\n    });\n  }\n}\n\nfunction* getStudentProgrammes() {\n  try {\n    const response = yield axios({\n      url: '/student-portal/auth/academic-records',\n      method: 'GET',\n    });\n    yield put({\n      type: authActions.GET_STUDENT_PROGRAMMES_SUCCESS,\n      data: response.data,\n    });\n  } catch (error) {\n    yield put({\n      type: authActions.GET_STUDENT_PROGRAMMES_ERROR,\n      error: error.data,\n    });\n  }\n}\n\nfunction* changePassword(action) {\n  try {\n    const response = yield axios({\n      url: `/student-portal/auth/change-password`,\n      method: 'PUT',\n      data: action.data,\n    });\n    yield put({\n      type: authActions.CHANGE_PASSWORD_SUCCESS,\n      data: response,\n    });\n  } catch (error) {\n    yield put({\n      type: authActions.CHANGE_PASSWORD_ERROR,\n      error: error.data,\n    });\n  }\n}\n\nfunction* requestToken(action) {\n  try {\n    const response = yield axios({\n      url: `/student-portal/auth/request-token`,\n      method: 'POST',\n      data: action.data,\n    });\n    yield put({\n      type: authActions.REQUEST_TOKEN_SUCCESS,\n      data: response,\n    });\n  } catch (error) {\n    yield put({\n      type: authActions.REQUEST_TOKEN_ERROR,\n      error: error.data,\n    });\n  }\n}\n\nfunction* resetPassword(action) {\n  try {\n    const response = yield axios({\n      url: `/student-portal/auth/reset-password`,\n      method: 'PUT',\n      data: action.data,\n    });\n    yield put({\n      type: authActions.RESET_PASSWORD_SUCCESS,\n      data: response,\n    });\n  } catch (error) {\n    yield put({\n      type: authActions.RESET_PASSWORD_ERROR,\n      error: error.data,\n    });\n  }\n}\n\nfunction* watchLoginStudent() {\n  yield takeLatest(authActions.LOGIN_STUDENT_REQUEST, loginStudent);\n}\n\nfunction* watchLogout() {\n  yield takeLatest(authActions.LOGOUT_REQUEST, logoutUser);\n}\n\nfunction* watchFetchAuthUser() {\n  yield takeLatest(authActions.GET_AUTH_USER_REQUEST, fetchAuthUser);\n}\n\nfunction* watchGetStudentProgrammes() {\n  yield takeLatest(\n    authActions.GET_STUDENT_PROGRAMMES_REQUEST,\n    getStudentProgrammes\n  );\n}\n\nfunction* watchGetStudentBalance() {\n  yield takeLatest(\n    authActions.GET_AUTH_USER_ACCOUNT_BALANCE_REQUEST,\n    getAuthUserBalance\n  );\n}\n\nfunction* watchChangePassword() {\n  yield takeLatest(authActions.CHANGE_PASSWORD_REQUEST, changePassword);\n}\n\nfunction* watchRequestToken() {\n  yield takeLatest(authActions.REQUEST_TOKEN_REQUEST, requestToken);\n}\n\nfunction* watchResetPassword() {\n  yield takeLatest(authActions.RESET_PASSWORD_REQUEST, resetPassword);\n}\n\nconst forkFunctions = [\n  fork(watchLoginStudent),\n  fork(watchLogout),\n  fork(watchFetchAuthUser),\n  fork(watchGetStudentProgrammes),\n  fork(watchGetStudentBalance),\n  fork(watchChangePassword),\n  fork(watchRequestToken),\n  fork(watchResetPassword),\n];\n\nexport default forkFunctions;\n"]},"metadata":{},"sourceType":"module"}