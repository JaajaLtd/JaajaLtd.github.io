{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Documents/react-projects/hesmis-front/src/containers/Payments/SearchPayment.jsx\",\n    _s = $RefreshSig$();\n\nimport { Result } from 'antd';\nimport { get, isEmpty } from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport { Card, Col, Form, Row, Table } from 'react-bootstrap';\nimport { useForm } from 'react-hook-form';\nimport { FaSearchDollar } from 'react-icons/fa';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { AlertMessage, InputText, SubmitButton } from '../../components/common';\nimport { paymentActions } from '../../config/actions';\nimport usePrevious from '../Hooks/usePrevious';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SearchPayment = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  const {\n    searchingPayment,\n    searchPayment,\n    searchPaymentError\n  } = useSelector(state => state.myTransaction);\n  const [searchSuccess, setSearchSuccess] = useState({});\n  const [searchError, setSearchError] = useState(null);\n  const prevState = usePrevious({\n    searchPayment,\n    searchPaymentError\n  });\n  useEffect(() => {\n    if (!isEmpty(prevState)) {\n      if (!isEmpty(searchPayment) && searchPayment !== prevState.searchPayment) {\n        setSearchSuccess(searchPayment);\n      }\n\n      if (!isEmpty(searchPaymentError) && searchPaymentError !== prevState.searchPaymentError) {\n        var _searchPaymentError$e, _searchPaymentError$s;\n\n        setSearchError((searchPaymentError === null || searchPaymentError === void 0 ? void 0 : (_searchPaymentError$e = searchPaymentError.error) === null || _searchPaymentError$e === void 0 ? void 0 : _searchPaymentError$e.message) || (searchPaymentError === null || searchPaymentError === void 0 ? void 0 : (_searchPaymentError$s = searchPaymentError.server) === null || _searchPaymentError$s === void 0 ? void 0 : _searchPaymentError$s.message));\n      }\n    }\n  }, [searchPayment, searchPaymentError]);\n\n  const onSearchPayment = data => {\n    setSearchError(null);\n    setSearchSuccess({});\n\n    if (data === null || data === void 0 ? void 0 : data.searchKey) {\n      dispatch(paymentActions.searchPayment(data.searchKey));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n        className: \"py-3 font600 text-sm text-uppercase text-muted\",\n        children: \"CHECK PAYMENT REFERENCE NUMBER STATUS\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: handleSubmit(onSearchPayment),\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            className: \"g-0\",\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              md: {\n                offset: 3,\n                span: 4\n              },\n              children: /*#__PURE__*/_jsxDEV(InputText, {\n                name: \"searchKey\",\n                type: \"search\",\n                placeholder: \"Enter Payment Reference Number\",\n                register: register({\n                  required: 'Enter Payment Reference',\n                  minLength: {\n                    value: 13,\n                    message: 'Invalid Reference Number'\n                  },\n                  maxLength: {\n                    value: 13,\n                    message: 'Invalid Reference Number'\n                  }\n                }),\n                error: get(errors, 'searchKey.message')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              md: 2,\n              children: /*#__PURE__*/_jsxDEV(SubmitButton, {\n                className: \"text-uppercase text-sm font600 text-white w-100\",\n                text: \"Search\",\n                loadingText: \"Searching...\",\n                loading: searchingPayment,\n                iconBefore: /*#__PURE__*/_jsxDEV(FaSearchDollar, {\n                  className: \"me-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 31\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this), searchError && /*#__PURE__*/_jsxDEV(Result, {\n            status: \"error\",\n            title: searchError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 29\n          }, this), !isEmpty(searchSuccess) && /*#__PURE__*/_jsxDEV(Card, {\n            body: true,\n            className: \"shadow-none rounded my-4\",\n            children: [/*#__PURE__*/_jsxDEV(AlertMessage, {\n              type: searchSuccess.code === 'T' ? 'success' : 'info',\n              message: `Status: ${searchSuccess === null || searchSuccess === void 0 ? void 0 : searchSuccess.description}`,\n              className: \"font600 text-sm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Table, {\n              size: \"md\",\n              bordered: true,\n              striped: true,\n              responsive: true,\n              className: \"text-sm text-muted font600\",\n              children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: \"PRN\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 108,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: searchSuccess.PRN\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 109,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: \"Amount\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: `${parseInt(searchSuccess.AmountPaid, 10).toLocaleString()} ${searchSuccess === null || searchSuccess === void 0 ? void 0 : searchSuccess.Currency}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: \"PAYMENT STATUS\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: searchSuccess.StatusDesc\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: \"Generated By\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: searchSuccess.TaxPayerName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: \"Expiry Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: searchSuccess.PaymentExpiryDate\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 130,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: \"Payment Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 133,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: searchSuccess.DatePaid || '-- -- ----'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: \"Payment Bank\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: searchSuccess.PaymentBank || '---------'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 138,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(SearchPayment, \"oQnDEJ88lXKO+GVhOBXrFtPDZpE=\", false, function () {\n  return [useDispatch, useForm, useSelector, usePrevious];\n});\n\n_c = SearchPayment;\nexport default SearchPayment;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchPayment\");","map":{"version":3,"sources":["/Users/admin/Documents/react-projects/hesmis-front/src/containers/Payments/SearchPayment.jsx"],"names":["Result","get","isEmpty","React","useEffect","useState","Card","Col","Form","Row","Table","useForm","FaSearchDollar","useDispatch","useSelector","AlertMessage","InputText","SubmitButton","paymentActions","usePrevious","SearchPayment","dispatch","register","handleSubmit","errors","searchingPayment","searchPayment","searchPaymentError","state","myTransaction","searchSuccess","setSearchSuccess","searchError","setSearchError","prevState","error","message","server","onSearchPayment","data","searchKey","offset","span","required","minLength","value","maxLength","code","description","PRN","parseInt","AmountPaid","toLocaleString","Currency","StatusDesc","TaxPayerName","PaymentExpiryDate","DatePaid","PaymentBank"],"mappings":"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","sourcesContent":["import { Result } from 'antd';\nimport { get, isEmpty } from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport { Card, Col, Form, Row, Table } from 'react-bootstrap';\nimport { useForm } from 'react-hook-form';\nimport { FaSearchDollar } from 'react-icons/fa';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { AlertMessage, InputText, SubmitButton } from '../../components/common';\nimport { paymentActions } from '../../config/actions';\nimport usePrevious from '../Hooks/usePrevious';\n\nconst SearchPayment = () => {\n  const dispatch = useDispatch();\n  const { register, handleSubmit, errors } = useForm();\n  const { searchingPayment, searchPayment, searchPaymentError } = useSelector(\n    (state) => state.myTransaction\n  );\n  const [searchSuccess, setSearchSuccess] = useState({});\n  const [searchError, setSearchError] = useState(null);\n  const prevState = usePrevious({ searchPayment, searchPaymentError });\n\n  useEffect(() => {\n    if (!isEmpty(prevState)) {\n      if (\n        !isEmpty(searchPayment) &&\n        searchPayment !== prevState.searchPayment\n      ) {\n        setSearchSuccess(searchPayment);\n      }\n      if (\n        !isEmpty(searchPaymentError) &&\n        searchPaymentError !== prevState.searchPaymentError\n      ) {\n        setSearchError(\n          searchPaymentError?.error?.message ||\n            searchPaymentError?.server?.message\n        );\n      }\n    }\n  }, [searchPayment, searchPaymentError]);\n\n  const onSearchPayment = (data) => {\n    setSearchError(null);\n    setSearchSuccess({});\n    if (data?.searchKey) {\n      dispatch(paymentActions.searchPayment(data.searchKey));\n    }\n  };\n\n  return (\n    <>\n      <Card>\n        <Card.Header className=\"py-3 font600 text-sm text-uppercase text-muted\">\n          CHECK PAYMENT REFERENCE NUMBER STATUS\n        </Card.Header>\n        <Card.Body>\n          <Form onSubmit={handleSubmit(onSearchPayment)}>\n            <Row className=\"g-0\">\n              <Col md={{ offset: 3, span: 4 }}>\n                <InputText\n                  name=\"searchKey\"\n                  type=\"search\"\n                  placeholder=\"Enter Payment Reference Number\"\n                  register={register({\n                    required: 'Enter Payment Reference',\n                    minLength: {\n                      value: 13,\n                      message: 'Invalid Reference Number',\n                    },\n                    maxLength: {\n                      value: 13,\n                      message: 'Invalid Reference Number',\n                    },\n                  })}\n                  error={get(errors, 'searchKey.message')}\n                />\n              </Col>\n              <Col md={2}>\n                <SubmitButton\n                  className=\"text-uppercase text-sm font600 text-white w-100\"\n                  text=\"Search\"\n                  loadingText=\"Searching...\"\n                  loading={searchingPayment}\n                  iconBefore={<FaSearchDollar className=\"me-2\" />}\n                />\n              </Col>\n            </Row>\n\n            {searchError && <Result status=\"error\" title={searchError} />}\n\n            {!isEmpty(searchSuccess) && (\n              <Card body className=\"shadow-none rounded my-4\">\n                <AlertMessage\n                  type={searchSuccess.code === 'T' ? 'success' : 'info'}\n                  message={`Status: ${searchSuccess?.description}`}\n                  className=\"font600 text-sm\"\n                />\n\n                <Table\n                  size=\"md\"\n                  bordered\n                  striped\n                  responsive\n                  className=\"text-sm text-muted font600\"\n                >\n                  <tbody>\n                    <tr>\n                      <td>PRN</td>\n                      <td>{searchSuccess.PRN}</td>\n                    </tr>\n                    <tr>\n                      <td>Amount</td>\n                      <td>\n                        {`${parseInt(\n                          searchSuccess.AmountPaid,\n                          10\n                        ).toLocaleString()} ${searchSuccess?.Currency}`}\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>PAYMENT STATUS</td>\n                      <td>{searchSuccess.StatusDesc}</td>\n                    </tr>\n                    <tr>\n                      <td>Generated By</td>\n                      <td>{searchSuccess.TaxPayerName}</td>\n                    </tr>\n                    <tr>\n                      <td>Expiry Date</td>\n                      <td>{searchSuccess.PaymentExpiryDate}</td>\n                    </tr>\n                    <tr>\n                      <td>Payment Date</td>\n                      <td>{searchSuccess.DatePaid || '-- -- ----'}</td>\n                    </tr>\n                    <tr>\n                      <td>Payment Bank</td>\n                      <td>{searchSuccess.PaymentBank || '---------'}</td>\n                    </tr>\n                  </tbody>\n                </Table>\n              </Card>\n            )}\n          </Form>\n        </Card.Body>\n      </Card>\n    </>\n  );\n};\n\nexport default SearchPayment;\n"]},"metadata":{},"sourceType":"module"}