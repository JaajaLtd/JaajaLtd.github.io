{"ast":null,"code":"import _slicedToArray from\"/Users/admin/Documents/react-projects/hesmis/hesmis-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{isEmpty,orderBy}from'lodash';import React,{useEffect,useState}from'react';import{Accordion,Card}from'react-bootstrap';import{FaPaperclip}from'react-icons/fa';import{useDispatch,useSelector}from'react-redux';import{DataNotFound,DataSpinner,ReloadButton,TabMenu}from'../../components/common';import AccordionHeader from'../../components/common/AccordionHeader';import{paymentReferenceActions}from'../../config/actions';import GeneratePaymentReference from'./GeneratePaymentReference';import ReferenceModal from'./ReferenceModal';import SinglePaymentReference from'./SinglePaymentReference';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PaymentReferences=function PaymentReferences(){var _paymentReferences$ac,_paymentReferences$in;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.paymentReference;}),paymentReferences=_useSelector.paymentReferences,gettingPaymentReferences=_useSelector.gettingPaymentReferences;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),activeKey=_useState2[0],setActiveKey=_useState2[1];var _useState3=useState('generate-reference'),_useState4=_slicedToArray(_useState3,2),activeTab=_useState4[0],setActiveTab=_useState4[1];var _useState5=useState('active'),_useState6=_slicedToArray(_useState5,2),referenceTab=_useState6[0],setReferenceTab=_useState6[1];var reloadPaymentReferences=function reloadPaymentReferences(){dispatch(paymentReferenceActions.getPaymentReferences());};useEffect(function(){if(isEmpty(paymentReferences))reloadPaymentReferences();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(TabMenu,{currentMenu:activeTab,setCurrentMenu:setActiveTab,menus:[{title:'Get Payment REF',action:'generate-reference'},{title:'My Payment REFs',action:'references'}]}),/*#__PURE__*/_jsxs(Card.Body,{className:\"overflow-auto\",children:[activeTab==='references'&&/*#__PURE__*/_jsxs(Card,{className:\"border-0\",children:[/*#__PURE__*/_jsx(TabMenu,{className:\"bg-white border\",variant:\"pills\",currentMenu:referenceTab,setCurrentMenu:setReferenceTab,menus:[{title:\"Active References (\".concat((paymentReferences===null||paymentReferences===void 0?void 0:(_paymentReferences$ac=paymentReferences.active)===null||_paymentReferences$ac===void 0?void 0:_paymentReferences$ac.length)||0,\")\"),action:'active'},{title:\"Expired References (\".concat((paymentReferences===null||paymentReferences===void 0?void 0:(_paymentReferences$in=paymentReferences.inactive)===null||_paymentReferences$in===void 0?void 0:_paymentReferences$in.length)||0,\")\"),action:'inactive'}],children:/*#__PURE__*/_jsx(\"div\",{className:\"card-options\",children:/*#__PURE__*/_jsx(ReloadButton,{loading:gettingPaymentReferences,onClick:reloadPaymentReferences})})}),gettingPaymentReferences&&isEmpty(paymentReferences[referenceTab])?/*#__PURE__*/_jsx(DataSpinner,{}):/*#__PURE__*/_jsx(_Fragment,{children:isEmpty(paymentReferences[referenceTab])?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(DataNotFound,{message:\"You have No \".concat(referenceTab,\" Payment References\")})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Accordion,{defaultActiveKey:\"1\",activeKey:activeKey,children:orderBy(paymentReferences[referenceTab],['ura_prn'],'desc').map(function(paymentReference){return/*#__PURE__*/_jsxs(Accordion.Item,{className:\"mb-0\",eventKey:paymentReference===null||paymentReference===void 0?void 0:paymentReference.id,children:[/*#__PURE__*/_jsxs(AccordionHeader,{activeKey:activeKey,eventKey:paymentReference===null||paymentReference===void 0?void 0:paymentReference.id,setActiveKey:setActiveKey,children:[/*#__PURE__*/_jsx(FaPaperclip,{className:\"me-2\"}),\"REFERENCE:\",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger ms-1\",children:paymentReference.ura_prn}),\", AMOUNT TO PAY:\",/*#__PURE__*/_jsx(\"strong\",{className:\"text-danger mx-1\",children:parseInt(paymentReference.amount,10).toLocaleString()}),\"UGX, EXPIRY DATE:\",/*#__PURE__*/_jsx(\"span\",{className:\"mx-1 text-danger\",children:\"\".concat(paymentReference.expiry_date)}),\", GENERATED BY:\",/*#__PURE__*/_jsx(\"span\",{className:\"ms-1 text-danger\",children:\"\".concat(paymentReference.generated_by==='STUDENT'?'SELF':paymentReference.generated_by)})]}),/*#__PURE__*/_jsx(Accordion.Body,{children:/*#__PURE__*/_jsx(SinglePaymentReference,{paymentReference:paymentReference},paymentReference.id)})]},paymentReference.id);})})})})]}),activeTab==='generate-reference'&&/*#__PURE__*/_jsx(GeneratePaymentReference,{})]})]}),/*#__PURE__*/_jsx(ReferenceModal,{switchTab:function switchTab(){return setActiveTab('references');}})]});};export default PaymentReferences;","map":{"version":3,"sources":["/Users/admin/Documents/react-projects/hesmis/hesmis-front/src/containers/PaymentReferences/index.jsx"],"names":["isEmpty","orderBy","React","useEffect","useState","Accordion","Card","FaPaperclip","useDispatch","useSelector","DataNotFound","DataSpinner","ReloadButton","TabMenu","AccordionHeader","paymentReferenceActions","GeneratePaymentReference","ReferenceModal","SinglePaymentReference","PaymentReferences","dispatch","state","paymentReference","paymentReferences","gettingPaymentReferences","activeKey","setActiveKey","activeTab","setActiveTab","referenceTab","setReferenceTab","reloadPaymentReferences","getPaymentReferences","title","action","active","length","inactive","map","id","ura_prn","parseInt","amount","toLocaleString","expiry_date","generated_by"],"mappings":"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","sourcesContent":["import { isEmpty, orderBy } from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport { Accordion, Card } from 'react-bootstrap';\nimport { FaPaperclip } from 'react-icons/fa';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  DataNotFound,\n  DataSpinner,\n  ReloadButton,\n  TabMenu,\n} from '../../components/common';\nimport AccordionHeader from '../../components/common/AccordionHeader';\nimport { paymentReferenceActions } from '../../config/actions';\nimport GeneratePaymentReference from './GeneratePaymentReference';\nimport ReferenceModal from './ReferenceModal';\nimport SinglePaymentReference from './SinglePaymentReference';\n\nconst PaymentReferences = () => {\n  const dispatch = useDispatch();\n  const { paymentReferences, gettingPaymentReferences } = useSelector(\n    (state) => state.paymentReference\n  );\n  const [activeKey, setActiveKey] = useState(1);\n  const [activeTab, setActiveTab] = useState('generate-reference');\n  const [referenceTab, setReferenceTab] = useState('active');\n\n  const reloadPaymentReferences = () => {\n    dispatch(paymentReferenceActions.getPaymentReferences());\n  };\n\n  useEffect(() => {\n    if (isEmpty(paymentReferences)) reloadPaymentReferences();\n  }, []);\n\n  return (\n    <>\n      <Card>\n        <TabMenu\n          currentMenu={activeTab}\n          setCurrentMenu={setActiveTab}\n          menus={[\n            {\n              title: 'Get Payment REF',\n              action: 'generate-reference',\n            },\n            {\n              title: 'My Payment REFs',\n              action: 'references',\n            },\n          ]}\n        />\n        <Card.Body className=\"overflow-auto\">\n          {activeTab === 'references' && (\n            <Card className=\"border-0\">\n              <TabMenu\n                className=\"bg-white border\"\n                variant=\"pills\"\n                currentMenu={referenceTab}\n                setCurrentMenu={setReferenceTab}\n                menus={[\n                  {\n                    title: `Active References (${\n                      paymentReferences?.active?.length || 0\n                    })`,\n                    action: 'active',\n                  },\n                  {\n                    title: `Expired References (${\n                      paymentReferences?.inactive?.length || 0\n                    })`,\n                    action: 'inactive',\n                  },\n                ]}\n              >\n                <div className=\"card-options\">\n                  <ReloadButton\n                    loading={gettingPaymentReferences}\n                    onClick={reloadPaymentReferences}\n                  />\n                </div>\n              </TabMenu>\n\n              {gettingPaymentReferences &&\n              isEmpty(paymentReferences[referenceTab]) ? (\n                <DataSpinner />\n              ) : (\n                <>\n                  {isEmpty(paymentReferences[referenceTab]) ? (\n                    <>\n                      <DataNotFound\n                        message={`You have No ${referenceTab} Payment References`}\n                      />\n                    </>\n                  ) : (\n                    <>\n                      <Accordion defaultActiveKey=\"1\" activeKey={activeKey}>\n                        {orderBy(\n                          paymentReferences[referenceTab],\n                          ['ura_prn'],\n                          'desc'\n                        ).map((paymentReference) => (\n                          <Accordion.Item\n                            className=\"mb-0\"\n                            key={paymentReference.id}\n                            eventKey={paymentReference?.id}\n                          >\n                            <AccordionHeader\n                              activeKey={activeKey}\n                              eventKey={paymentReference?.id}\n                              setActiveKey={setActiveKey}\n                            >\n                              <FaPaperclip className=\"me-2\" />\n                              REFERENCE:\n                              <span className=\"text-danger ms-1\">\n                                {paymentReference.ura_prn}\n                              </span>\n                              , AMOUNT TO PAY:\n                              <strong className=\"text-danger mx-1\">\n                                {parseInt(\n                                  paymentReference.amount,\n                                  10\n                                ).toLocaleString()}\n                              </strong>\n                              UGX, EXPIRY DATE:\n                              <span className=\"mx-1 text-danger\">\n                                {`${paymentReference.expiry_date}`}\n                              </span>\n                              , GENERATED BY:\n                              <span className=\"ms-1 text-danger\">\n                                {`${\n                                  paymentReference.generated_by === 'STUDENT'\n                                    ? 'SELF'\n                                    : paymentReference.generated_by\n                                }`}\n                              </span>\n                            </AccordionHeader>\n                            <Accordion.Body>\n                              <SinglePaymentReference\n                                paymentReference={paymentReference}\n                                key={paymentReference.id}\n                              />\n                            </Accordion.Body>\n                          </Accordion.Item>\n                        ))}\n                      </Accordion>\n                    </>\n                  )}\n                </>\n              )}\n            </Card>\n          )}\n          {activeTab === 'generate-reference' && <GeneratePaymentReference />}\n        </Card.Body>\n      </Card>\n      <ReferenceModal switchTab={() => setActiveTab('references')} />\n    </>\n  );\n};\n\nexport default PaymentReferences;\n"]},"metadata":{},"sourceType":"module"}