{"ast":null,"code":"import{Drawer,Layout}from'antd';import{isEmpty}from'lodash';import React,{useEffect}from'react';import Helmet from'react-helmet';import{useDispatch,useSelector}from'react-redux';import{useMediaQuery}from'react-responsive';import{appActions,authActions,settingActions}from'../../config/actions';import MenuList from'../../config/routes/MenuList';import HeaderComponent from'../../containers/Dashboard/Header';import ComingSoon from'../../containers/Pages/ComingSoon';import MainHeader from'./MainHeader';import SideBar from'./SideBar';import SideTitle from'./SideTitle';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Sider=Layout.Sider,Content=Layout.Content,Footer=Layout.Footer;var MainLayout=function MainLayout(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.setting;}),selectedMenu=_useSelector.selectedMenu,isToggled=_useSelector.isToggled;var _useSelector2=useSelector(function(state){return state.auth;}),authUser=_useSelector2.authUser,currentStudentProgramme=_useSelector2.currentStudentProgramme;var _useSelector3=useSelector(function(state){return state.app;}),institutionStructure=_useSelector3.institutionStructure;var isMobileDevice=useMediaQuery({maxWidth:767});useEffect(function(){if(isEmpty(authUser)){dispatch(authActions.getAuthUser());}if(isEmpty(institutionStructure))dispatch(appActions.getInstitutionStructure());},[]);useEffect(function(){if(isEmpty(selectedMenu)){dispatch(settingActions.setSelectedMenu(MenuList.SelfEnrollment));}},[selectedMenu]);var renderSwitchStatement=function renderSwitchStatement(){var component=ComingSoon;var findMenuKey=Object.keys(MenuList).find(function(menu){return MenuList[menu].action===selectedMenu.action;});if(findMenuKey){component=MenuList[findMenuKey].Component;}return/*#__PURE__*/React.createElement(component);};var hideOrShowSideBar=function hideOrShowSideBar(){dispatch(settingActions.setIsToggled(!isToggled));};var getToggleMargin=function getToggleMargin(){if(isMobileDevice)return 0;return isToggled?0:260;};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:selectedMenu===null||selectedMenu===void 0?void 0:selectedMenu.title})}),/*#__PURE__*/_jsxs(Layout,{style:{minHeight:'100vh'},children:[isMobileDevice?/*#__PURE__*/_jsx(Drawer,{title:/*#__PURE__*/_jsx(SideTitle,{}),placement:\"left\",closable:false,onClose:hideOrShowSideBar,visible:isToggled,getContainer:false,className:\"p-0\",bodyStyle:{padding:0},headerStyle:{padding:'10px 10px'},style:{overflow:'auto',height:'100vh',position:'fixed',left:0},children:/*#__PURE__*/_jsx(SideBar,{})}):/*#__PURE__*/_jsxs(Sider,{theme:\"light\",breakpoint:\"md\",className:\"border-end\",width:260,collapsible:true,reverseArrow:true,collapsedWidth:0,collapsed:isToggled,onCollapse:hideOrShowSideBar,style:{overflow:'auto',height:'100vh',position:'fixed',left:0},children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white font600 p-2\",children:/*#__PURE__*/_jsx(SideTitle,{})}),/*#__PURE__*/_jsx(SideBar,{})]}),/*#__PURE__*/_jsxs(Layout,{style:{marginLeft:getToggleMargin(),transition:'all 0.2s'},children:[/*#__PURE__*/_jsx(MainHeader,{}),/*#__PURE__*/_jsxs(Content,{children:[/*#__PURE__*/_jsx(HeaderComponent,{}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3\",children:renderSwitchStatement()})]}),/*#__PURE__*/_jsx(Footer,{className:\"bg-white text-sm text-muted font600 py-3 border-top text-center\",children:\"\\xA9 School System\"})]})]},currentStudentProgramme.id)]});};export default MainLayout;","map":{"version":3,"sources":["/Users/admin/Documents/react-projects/hesmis/hesmis-front/src/components/shared/MainLayout.jsx"],"names":["Drawer","Layout","isEmpty","React","useEffect","Helmet","useDispatch","useSelector","useMediaQuery","appActions","authActions","settingActions","MenuList","HeaderComponent","ComingSoon","MainHeader","SideBar","SideTitle","Sider","Content","Footer","MainLayout","dispatch","state","setting","selectedMenu","isToggled","auth","authUser","currentStudentProgramme","app","institutionStructure","isMobileDevice","maxWidth","getAuthUser","getInstitutionStructure","setSelectedMenu","SelfEnrollment","renderSwitchStatement","component","findMenuKey","Object","keys","find","menu","action","Component","createElement","hideOrShowSideBar","setIsToggled","getToggleMargin","title","minHeight","padding","overflow","height","position","left","marginLeft","transition","id"],"mappings":"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","sourcesContent":["import { Drawer, Layout } from 'antd';\nimport { isEmpty } from 'lodash';\nimport React, { useEffect } from 'react';\nimport Helmet from 'react-helmet';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useMediaQuery } from 'react-responsive';\nimport { appActions, authActions, settingActions } from '../../config/actions';\nimport MenuList from '../../config/routes/MenuList';\nimport HeaderComponent from '../../containers/Dashboard/Header';\nimport ComingSoon from '../../containers/Pages/ComingSoon';\nimport MainHeader from './MainHeader';\nimport SideBar from './SideBar';\nimport SideTitle from './SideTitle';\n\nconst { Sider, Content, Footer } = Layout;\n\nconst MainLayout = () => {\n  const dispatch = useDispatch();\n  const { selectedMenu, isToggled } = useSelector((state) => state.setting);\n  const { authUser, currentStudentProgramme } = useSelector(\n    (state) => state.auth\n  );\n  const { institutionStructure } = useSelector((state) => state.app);\n  const isMobileDevice = useMediaQuery({ maxWidth: 767 });\n\n  useEffect(() => {\n    if (isEmpty(authUser)) {\n      dispatch(authActions.getAuthUser());\n    }\n    if (isEmpty(institutionStructure))\n      dispatch(appActions.getInstitutionStructure());\n  }, []);\n\n  useEffect(() => {\n    if (isEmpty(selectedMenu)) {\n      dispatch(settingActions.setSelectedMenu(MenuList.SelfEnrollment));\n    }\n  }, [selectedMenu]);\n\n  const renderSwitchStatement = () => {\n    let component = ComingSoon;\n    const findMenuKey = Object.keys(MenuList).find(\n      (menu) => MenuList[menu].action === selectedMenu.action\n    );\n\n    if (findMenuKey) {\n      component = MenuList[findMenuKey].Component;\n    }\n    return React.createElement(component);\n  };\n\n  const hideOrShowSideBar = () => {\n    dispatch(settingActions.setIsToggled(!isToggled));\n  };\n\n  const getToggleMargin = () => {\n    if (isMobileDevice) return 0;\n\n    return isToggled ? 0 : 260;\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>{selectedMenu?.title}</title>\n      </Helmet>\n\n      <Layout style={{ minHeight: '100vh' }} key={currentStudentProgramme.id}>\n        {isMobileDevice ? (\n          <Drawer\n            title={<SideTitle />}\n            placement=\"left\"\n            closable={false}\n            onClose={hideOrShowSideBar}\n            visible={isToggled}\n            getContainer={false}\n            className=\"p-0\"\n            bodyStyle={{ padding: 0 }}\n            headerStyle={{ padding: '10px 10px' }}\n            style={{\n              overflow: 'auto',\n              height: '100vh',\n              position: 'fixed',\n              left: 0,\n            }}\n          >\n            <SideBar />\n          </Drawer>\n        ) : (\n          <Sider\n            theme=\"light\"\n            breakpoint=\"md\"\n            className=\"border-end\"\n            width={260}\n            collapsible\n            reverseArrow\n            collapsedWidth={0}\n            collapsed={isToggled}\n            onCollapse={hideOrShowSideBar}\n            style={{\n              overflow: 'auto',\n              height: '100vh',\n              position: 'fixed',\n              left: 0,\n            }}\n          >\n            <div className=\"bg-white font600 p-2\">\n              <SideTitle />\n            </div>\n            <SideBar />\n          </Sider>\n        )}\n\n        <Layout\n          style={{\n            marginLeft: getToggleMargin(),\n            transition: 'all 0.2s',\n          }}\n        >\n          <MainHeader />\n          <Content>\n            <HeaderComponent />\n            <div className=\"p-3\">{renderSwitchStatement()}</div>\n          </Content>\n          <Footer className=\"bg-white text-sm text-muted font600 py-3 border-top text-center\">\n            &copy; School System\n          </Footer>\n        </Layout>\n      </Layout>\n    </>\n  );\n};\n\nexport default MainLayout;\n"]},"metadata":{},"sourceType":"module"}