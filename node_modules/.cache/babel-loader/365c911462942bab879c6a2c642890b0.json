{"ast":null,"code":"import _slicedToArray from\"/Users/admin/Documents/react-projects/hesmis/hesmis-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{isEmpty}from'lodash';import React,{useEffect,useState}from'react';import{Button,ModalBody,ModalFooter}from'react-bootstrap';import{FaCheckCircle}from'react-icons/fa';import{useDispatch,useSelector}from'react-redux';import{AlertMessage,CustomModal}from'../../components/common';import{settingActions}from'../../config/actions';import usePrevious from'../Hooks/usePrevious';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ReferenceModal=function ReferenceModal(_ref){var switchTab=_ref.switchTab;var dispatch=useDispatch();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),errorMessage=_useState2[0],setErrorMessage=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),generatedReference=_useState4[0],setGeneratedReference=_useState4[1];var _useSelector=useSelector(function(state){return state.paymentReference;}),generateSuccess=_useSelector.generateSuccess,generateError=_useSelector.generateError;var showModal=useSelector(function(state){return state.setting.showModal;});var prevState=usePrevious({generateSuccess:generateSuccess,generateError:generateError});useEffect(function(){if(!isEmpty(prevState)&&!isEmpty(generateSuccess)&&generateSuccess!==prevState.generateSuccess){setGeneratedReference(generateSuccess);dispatch(settingActions.setShowModal(true));if(switchTab)switchTab();}if(!isEmpty(prevState)&&!isEmpty(generateError)&&generateError!==prevState.generateError){var _generateError$error,_generateError$server;setErrorMessage((generateError===null||generateError===void 0?void 0:(_generateError$error=generateError.error)===null||_generateError$error===void 0?void 0:_generateError$error.message)||(generateError===null||generateError===void 0?void 0:(_generateError$server=generateError.server)===null||_generateError$server===void 0?void 0:_generateError$server.message));}},[generateSuccess,generateError]);return/*#__PURE__*/_jsxs(_Fragment,{children:[errorMessage&&/*#__PURE__*/_jsx(AlertMessage,{message:errorMessage}),!isEmpty(generatedReference)&&showModal&&/*#__PURE__*/_jsxs(CustomModal,{backdrop:\"static\",keyboard:false,title:\"PAYMENT REFERENCE GENERATED SUCCESSFULLY\",children:[/*#__PURE__*/_jsxs(ModalBody,{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-md font600er\",children:[/*#__PURE__*/_jsx(FaCheckCircle,{className:\"text-success me-1\"}),\"PAYMENT REFERENCE NO.:\",/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font600 text-success mx-1\",children:generatedReference.ura_prn})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font600er\",children:[\"TOTAL AMOUNT TO PAY:\",/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font600 text-success mx-1\",children:\"\".concat(parseInt(generatedReference.amount,10).toLocaleString(),\" UGX\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs font600er mt-2\",children:[\"DATE OF EXPIRY:\",/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font600 text-danger mx-2\",children:generatedReference.expiry_date})]}),/*#__PURE__*/_jsx(AlertMessage,{message:\"Copy this reference number and go to your nearest Bank to make your payments.\",variant:\"info\",className:\"text-center font600 p-1 my-2 text-sm\"})]}),/*#__PURE__*/_jsx(ModalFooter,{className:\"py-2 bg-light border-top\",children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",size:\"sm\",onClick:function onClick(){return dispatch(settingActions.setShowModal(false));},className:\"text-uppercase\",children:\"Close\"})})]})]});};ReferenceModal.defaultProps={switchTab:null};export default ReferenceModal;","map":{"version":3,"sources":["/Users/admin/Documents/react-projects/hesmis/hesmis-front/src/containers/PaymentReferences/ReferenceModal.jsx"],"names":["isEmpty","React","useEffect","useState","Button","ModalBody","ModalFooter","FaCheckCircle","useDispatch","useSelector","AlertMessage","CustomModal","settingActions","usePrevious","ReferenceModal","switchTab","dispatch","errorMessage","setErrorMessage","generatedReference","setGeneratedReference","state","paymentReference","generateSuccess","generateError","showModal","setting","prevState","setShowModal","error","message","server","ura_prn","parseInt","amount","toLocaleString","expiry_date","defaultProps"],"mappings":"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","sourcesContent":["import { isEmpty } from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalBody, ModalFooter } from 'react-bootstrap';\nimport { FaCheckCircle } from 'react-icons/fa';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { AlertMessage, CustomModal } from '../../components/common';\nimport { settingActions } from '../../config/actions';\nimport usePrevious from '../Hooks/usePrevious';\n\nconst ReferenceModal = ({ switchTab }) => {\n  const dispatch = useDispatch();\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [generatedReference, setGeneratedReference] = useState({});\n  const { generateSuccess, generateError } = useSelector(\n    (state) => state.paymentReference\n  );\n  const showModal = useSelector((state) => state.setting.showModal);\n  const prevState = usePrevious({ generateSuccess, generateError });\n\n  useEffect(() => {\n    if (\n      !isEmpty(prevState) &&\n      !isEmpty(generateSuccess) &&\n      generateSuccess !== prevState.generateSuccess\n    ) {\n      setGeneratedReference(generateSuccess);\n      dispatch(settingActions.setShowModal(true));\n      if (switchTab) switchTab();\n    }\n    if (\n      !isEmpty(prevState) &&\n      !isEmpty(generateError) &&\n      generateError !== prevState.generateError\n    ) {\n      setErrorMessage(\n        generateError?.error?.message || generateError?.server?.message\n      );\n    }\n  }, [generateSuccess, generateError]);\n\n  return (\n    <>\n      {errorMessage && <AlertMessage message={errorMessage} />}\n      {!isEmpty(generatedReference) && showModal && (\n        <CustomModal\n          backdrop=\"static\"\n          keyboard={false}\n          title=\"PAYMENT REFERENCE GENERATED SUCCESSFULLY\"\n        >\n          <ModalBody className=\"text-center\">\n            <div className=\"text-md font600er\">\n              <FaCheckCircle className=\"text-success me-1\" />\n              PAYMENT REFERENCE NO.:\n              <span className=\"text-sm font600 text-success mx-1\">\n                {generatedReference.ura_prn}\n              </span>\n            </div>\n\n            <div className=\"text-sm font600er\">\n              TOTAL AMOUNT TO PAY:\n              <span className=\"text-sm font600 text-success mx-1\">\n                {`${parseInt(\n                  generatedReference.amount,\n                  10\n                ).toLocaleString()} UGX`}\n              </span>\n            </div>\n\n            <div className=\"text-xs font600er mt-2\">\n              DATE OF EXPIRY:\n              <span className=\"text-xs font600 text-danger mx-2\">\n                {generatedReference.expiry_date}\n              </span>\n            </div>\n\n            <AlertMessage\n              message=\"Copy this reference number and go to your nearest Bank to make your payments.\"\n              variant=\"info\"\n              className=\"text-center font600 p-1 my-2 text-sm\"\n            />\n          </ModalBody>\n          <ModalFooter className=\"py-2 bg-light border-top\">\n            <Button\n              variant=\"danger\"\n              size=\"sm\"\n              onClick={() => dispatch(settingActions.setShowModal(false))}\n              className=\"text-uppercase\"\n            >\n              Close\n            </Button>\n          </ModalFooter>\n        </CustomModal>\n      )}\n    </>\n  );\n};\n\nReferenceModal.defaultProps = {\n  switchTab: null,\n};\n\nReferenceModal.propTypes = {\n  switchTab: PropTypes.func,\n};\n\nexport default ReferenceModal;\n"]},"metadata":{},"sourceType":"module"}