{"ast":null,"code":"import _toConsumableArray from\"/Users/admin/Documents/react-projects/hesmis/hesmis-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/admin/Documents/react-projects/hesmis/hesmis-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{get,isEmpty}from'lodash';import React from'react';import{Form,ModalBody,ModalFooter,Table}from'react-bootstrap';import{useForm}from'react-hook-form';import{useDispatch}from'react-redux';import{CustomModal,SelectInput,SubmitButton}from'../../components/common';import{settingActions}from'../../config/actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegistrationStatusPopUp=function RegistrationStatusPopUp(_ref){var rowData=_ref.rowData,setSelectedRow=_ref.setSelectedRow,registrationStatusOptions=_ref.registrationStatusOptions,selectedCourseUnits=_ref.selectedCourseUnits;var _useForm=useForm(),register=_useForm.register,errors=_useForm.errors,handleSubmit=_useForm.handleSubmit;var dispatch=useDispatch();var handleSubmitForm=function handleSubmitForm(data){if(!isEmpty(data)){var newObjectKey=_objectSpread(_objectSpread({},rowData),{},{registrationStatus:registrationStatusOptions.find(function(status){return status.value===data.registration_status;})});var findCourseUnit=selectedCourseUnits.find(function(courseUnit){return courseUnit.course_unit_id===rowData.course_unit_id;});if(!findCourseUnit){setSelectedRow([].concat(_toConsumableArray(selectedCourseUnits),[newObjectKey]));}else{var changeValue=selectedCourseUnits.map(function(courseUnit){if(courseUnit.course_unit_id===findCourseUnit.course_unit_id){return _objectSpread(_objectSpread({},courseUnit),{},{registrationStatus:registrationStatusOptions.find(function(status){return status.value===data.registration_status;})});}return courseUnit;});setSelectedRow(changeValue);}dispatch(dispatch(settingActions.setShowModal(false)));}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CustomModal,{backdrop:\"static\",keyboard:false,title:\"SELECT REGISTRATION STATUS\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(handleSubmitForm),children:[/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsxs(Table,{size:\"sm\",bordered:true,responsive:true,className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"text-xs bg-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"CODE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"COURSE TITLE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CU\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:rowData.course_unit_code}),/*#__PURE__*/_jsx(\"td\",{children:rowData.course_unit_name}),/*#__PURE__*/_jsx(\"td\",{children:rowData.credit_unit})]})})]}),/*#__PURE__*/_jsx(SelectInput,{register:register({required:'Select Registration Status'}),name:\"registration_status\",selectOptions:registrationStatusOptions,label:\"Registration Status\",error:get(errors,'registration_status.message')})]}),/*#__PURE__*/_jsx(ModalFooter,{className:\"py-2 bg-light\",children:/*#__PURE__*/_jsx(SubmitButton,{text:\"ADD COURSE\"})})]})})});};RegistrationStatusPopUp.defaultProps={registrationStatusOptions:[],selectedCourseUnits:[]};export default RegistrationStatusPopUp;","map":{"version":3,"sources":["/Users/admin/Documents/react-projects/hesmis/hesmis-front/src/containers/RegistrationHistory/RegistrationStatusPopUp.jsx"],"names":["get","isEmpty","React","Form","ModalBody","ModalFooter","Table","useForm","useDispatch","CustomModal","SelectInput","SubmitButton","settingActions","RegistrationStatusPopUp","rowData","setSelectedRow","registrationStatusOptions","selectedCourseUnits","register","errors","handleSubmit","dispatch","handleSubmitForm","data","newObjectKey","registrationStatus","find","status","value","registration_status","findCourseUnit","courseUnit","course_unit_id","changeValue","map","setShowModal","course_unit_code","course_unit_name","credit_unit","required","defaultProps"],"mappings":"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","sourcesContent":["import { get, isEmpty } from 'lodash';\nimport PropTypes, { object, array } from 'prop-types';\nimport React from 'react';\nimport { Form, ModalBody, ModalFooter, Table } from 'react-bootstrap';\nimport { useForm } from 'react-hook-form';\nimport { useDispatch } from 'react-redux';\nimport {\n  CustomModal,\n  SelectInput,\n  SubmitButton,\n} from '../../components/common';\nimport { settingActions } from '../../config/actions';\n\nconst RegistrationStatusPopUp = ({\n  rowData,\n  setSelectedRow,\n  registrationStatusOptions,\n  selectedCourseUnits,\n}) => {\n  const { register, errors, handleSubmit } = useForm();\n  const dispatch = useDispatch();\n\n  const handleSubmitForm = (data) => {\n    if (!isEmpty(data)) {\n      const newObjectKey = {\n        ...rowData,\n        registrationStatus: registrationStatusOptions.find(\n          (status) => status.value === data.registration_status\n        ),\n      };\n      const findCourseUnit = selectedCourseUnits.find(\n        (courseUnit) => courseUnit.course_unit_id === rowData.course_unit_id\n      );\n      if (!findCourseUnit) {\n        setSelectedRow([...selectedCourseUnits, newObjectKey]);\n      } else {\n        const changeValue = selectedCourseUnits.map((courseUnit) => {\n          if (courseUnit.course_unit_id === findCourseUnit.course_unit_id) {\n            return {\n              ...courseUnit,\n              registrationStatus: registrationStatusOptions.find(\n                (status) => status.value === data.registration_status\n              ),\n            };\n          }\n          return courseUnit;\n        });\n        setSelectedRow(changeValue);\n      }\n      dispatch(dispatch(settingActions.setShowModal(false)));\n    }\n  };\n  return (\n    <div>\n      <CustomModal\n        backdrop=\"static\"\n        keyboard={false}\n        title=\"SELECT REGISTRATION STATUS\"\n      >\n        <Form onSubmit={handleSubmit(handleSubmitForm)}>\n          <ModalBody>\n            <Table size=\"sm\" bordered responsive className=\"text-sm\">\n              <thead className=\"text-xs bg-light\">\n                <tr>\n                  <th>CODE</th>\n                  <th>COURSE TITLE</th>\n                  <th>CU</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr>\n                  <td>{rowData.course_unit_code}</td>\n                  <td>{rowData.course_unit_name}</td>\n                  <td>{rowData.credit_unit}</td>\n                </tr>\n              </tbody>\n            </Table>\n\n            <SelectInput\n              register={register({\n                required: 'Select Registration Status',\n              })}\n              name=\"registration_status\"\n              selectOptions={registrationStatusOptions}\n              label=\"Registration Status\"\n              error={get(errors, 'registration_status.message')}\n            />\n          </ModalBody>\n          <ModalFooter className=\"py-2 bg-light\">\n            <SubmitButton text=\"ADD COURSE\" />\n          </ModalFooter>\n        </Form>\n      </CustomModal>\n    </div>\n  );\n};\n\nRegistrationStatusPopUp.defaultProps = {\n  registrationStatusOptions: [],\n  selectedCourseUnits: [],\n};\n\nRegistrationStatusPopUp.propTypes = {\n  rowData: PropTypes.oneOfType([object]).isRequired,\n  setSelectedRow: PropTypes.func.isRequired,\n  registrationStatusOptions: PropTypes.oneOfType([array]),\n  selectedCourseUnits: PropTypes.oneOfType([array]),\n};\n\nexport default RegistrationStatusPopUp;\n"]},"metadata":{},"sourceType":"module"}