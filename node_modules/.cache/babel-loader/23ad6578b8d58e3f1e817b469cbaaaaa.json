{"ast":null,"code":"import _regeneratorRuntime from\"/Users/admin/Documents/react-projects/hesmis/hesmis-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(getMyInvoices),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(getMyTransactions),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(searchPayment),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(watchGetMyInvoices),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(watchGetMyTransactions),_marked6=/*#__PURE__*/_regeneratorRuntime.mark(watchGetSearchReference);import{takeLatest,fork,put}from'redux-saga/effects';import axios from'axios';import{authActions,paymentActions,paymentReferenceActions}from'../../actions';function getMyInvoices(actions){var response;return _regeneratorRuntime.wrap(function getMyInvoices$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios({url:'/student-portal/invoices',method:'GET',params:actions.data});case 3:response=_context.sent;_context.next=6;return put({type:paymentActions.GET_MY_INVOICES_SUCCESS,data:response.data});case 6:_context.next=8;return put({type:authActions.GET_AUTH_USER_ACCOUNT_BALANCE_REQUEST});case 8:_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);_context.next=14;return put({type:paymentActions.GET_MY_INVOICES_ERROR,error:_context.t0.data});case 14:case\"end\":return _context.stop();}}},_marked,null,[[0,10]]);}function getMyTransactions(actions){var response;return _regeneratorRuntime.wrap(function getMyTransactions$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios({url:'/student-portal/payment-transactions/history',method:'GET',params:actions.data});case 3:response=_context2.sent;delete response.server;_context2.next=7;return put({type:paymentActions.GET_MY_TRANSACTIONS_SUCCESS,data:response});case 7:_context2.next=9;return put({type:authActions.GET_AUTH_USER_ACCOUNT_BALANCE_REQUEST});case 9:_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);_context2.next=15;return put({type:paymentActions.GET_MY_TRANSACTIONS_ERROR,error:_context2.t0.data});case 15:case\"end\":return _context2.stop();}}},_marked2,null,[[0,11]]);}function searchPayment(actions){var response;return _regeneratorRuntime.wrap(function searchPayment$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios({url:\"/student-portal/payment-references/search-prn/\".concat(actions.prn),method:'GET'});case 3:response=_context3.sent;_context3.next=6;return put({type:paymentActions.SEARCH_PAYMENT_SUCCESS,data:response.data});case 6:_context3.next=8;return put({type:authActions.GET_AUTH_USER_ACCOUNT_BALANCE_REQUEST});case 8:_context3.next=10;return put({type:paymentReferenceActions.GETTING_PAYMENT_REFERENCES_REQUEST});case 10:_context3.next=16;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](0);_context3.next=16;return put({type:paymentActions.SEARCH_PAYMENT_ERROR,error:_context3.t0.data});case 16:case\"end\":return _context3.stop();}}},_marked3,null,[[0,12]]);}function watchGetMyInvoices(){return _regeneratorRuntime.wrap(function watchGetMyInvoices$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return takeLatest(paymentActions.GET_MY_INVOICES_REQUEST,getMyInvoices);case 2:case\"end\":return _context4.stop();}}},_marked4);}function watchGetMyTransactions(){return _regeneratorRuntime.wrap(function watchGetMyTransactions$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return takeLatest(paymentActions.GET_MY_TRANSACTIONS_REQUEST,getMyTransactions);case 2:case\"end\":return _context5.stop();}}},_marked5);}function watchGetSearchReference(){return _regeneratorRuntime.wrap(function watchGetSearchReference$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return takeLatest(paymentActions.SEARCH_PAYMENT_REQUEST,searchPayment);case 2:case\"end\":return _context6.stop();}}},_marked6);}var forkFunctions=[fork(watchGetMyInvoices),fork(watchGetMyTransactions),fork(watchGetSearchReference)];export default forkFunctions;","map":{"version":3,"sources":["/Users/admin/Documents/react-projects/hesmis/hesmis-front/src/config/saga/payment/index.js"],"names":["getMyInvoices","getMyTransactions","searchPayment","watchGetMyInvoices","watchGetMyTransactions","watchGetSearchReference","takeLatest","fork","put","axios","authActions","paymentActions","paymentReferenceActions","actions","url","method","params","data","response","type","GET_MY_INVOICES_SUCCESS","GET_AUTH_USER_ACCOUNT_BALANCE_REQUEST","GET_MY_INVOICES_ERROR","error","server","GET_MY_TRANSACTIONS_SUCCESS","GET_MY_TRANSACTIONS_ERROR","prn","SEARCH_PAYMENT_SUCCESS","GETTING_PAYMENT_REFERENCES_REQUEST","SEARCH_PAYMENT_ERROR","GET_MY_INVOICES_REQUEST","GET_MY_TRANSACTIONS_REQUEST","SEARCH_PAYMENT_REQUEST","forkFunctions"],"mappings":"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","sourcesContent":["import { takeLatest, fork, put } from 'redux-saga/effects';\nimport axios from 'axios';\nimport {\n  authActions,\n  paymentActions,\n  paymentReferenceActions,\n} from '../../actions';\n\nfunction* getMyInvoices(actions) {\n  try {\n    const response = yield axios({\n      url: '/student-portal/invoices',\n      method: 'GET',\n      params: actions.data,\n    });\n    yield put({\n      type: paymentActions.GET_MY_INVOICES_SUCCESS,\n      data: response.data,\n    });\n    yield put({\n      type: authActions.GET_AUTH_USER_ACCOUNT_BALANCE_REQUEST,\n    });\n  } catch (error) {\n    yield put({\n      type: paymentActions.GET_MY_INVOICES_ERROR,\n      error: error.data,\n    });\n  }\n}\n\nfunction* getMyTransactions(actions) {\n  try {\n    const response = yield axios({\n      url: '/student-portal/payment-transactions/history',\n      method: 'GET',\n      params: actions.data,\n    });\n    delete response.server;\n    yield put({\n      type: paymentActions.GET_MY_TRANSACTIONS_SUCCESS,\n      data: response,\n    });\n    yield put({\n      type: authActions.GET_AUTH_USER_ACCOUNT_BALANCE_REQUEST,\n    });\n  } catch (error) {\n    yield put({\n      type: paymentActions.GET_MY_TRANSACTIONS_ERROR,\n      error: error.data,\n    });\n  }\n}\n\nfunction* searchPayment(actions) {\n  try {\n    const response = yield axios({\n      url: `/student-portal/payment-references/search-prn/${actions.prn}`,\n      method: 'GET',\n    });\n    yield put({\n      type: paymentActions.SEARCH_PAYMENT_SUCCESS,\n      data: response.data,\n    });\n    yield put({\n      type: authActions.GET_AUTH_USER_ACCOUNT_BALANCE_REQUEST,\n    });\n    yield put({\n      type: paymentReferenceActions.GETTING_PAYMENT_REFERENCES_REQUEST,\n    });\n  } catch (error) {\n    yield put({\n      type: paymentActions.SEARCH_PAYMENT_ERROR,\n      error: error.data,\n    });\n  }\n}\n\nfunction* watchGetMyInvoices() {\n  yield takeLatest(paymentActions.GET_MY_INVOICES_REQUEST, getMyInvoices);\n}\n\nfunction* watchGetMyTransactions() {\n  yield takeLatest(\n    paymentActions.GET_MY_TRANSACTIONS_REQUEST,\n    getMyTransactions\n  );\n}\n\nfunction* watchGetSearchReference() {\n  yield takeLatest(paymentActions.SEARCH_PAYMENT_REQUEST, searchPayment);\n}\n\nconst forkFunctions = [\n  fork(watchGetMyInvoices),\n  fork(watchGetMyTransactions),\n  fork(watchGetSearchReference),\n];\n\nexport default forkFunctions;\n"]},"metadata":{},"sourceType":"module"}